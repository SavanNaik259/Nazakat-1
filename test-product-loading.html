
<div class="test-container" style="padding: 20px; font-family: Arial, sans-serif;">
    <h1>Product Loading Test</h1>
    <div id="test-results"></div>
    
    <script>
        async function testProductLoading() {
            const resultsDiv = document.getElementById('test-results');
            
            const categories = ['bridal', 'new-arrivals', 'polki'];
            
            for (const category of categories) {
                try {
                    resultsDiv.innerHTML += `<h3>Testing ${category} products...</h3>`;
                    
                    const response = await fetch(`/.netlify/functions/load-products?category=${category}&cacheBust=${Date.now()}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    const data = await response.json();
                    
                    resultsDiv.innerHTML += `
                        <div style="margin: 10px 0; padding: 10px; border: 1px solid #ccc;">
                            <strong>Category:</strong> ${category}<br>
                            <strong>Success:</strong> ${data.success}<br>
                            <strong>Products Count:</strong> ${data.products ? data.products.length : 0}<br>
                            <strong>Message:</strong> ${data.message}<br>
                            <strong>Raw Response:</strong><br>
                            <pre style="background: #f5f5f5; padding: 10px; max-height: 200px; overflow: auto;">${JSON.stringify(data, null, 2)}</pre>
                        </div>
                    `;
                    
                    if (data.products && data.products.length > 0) {
                        resultsDiv.innerHTML += `
                            <div style="margin: 10px 0;">
                                <strong>First Product Structure:</strong><br>
                                <pre style="background: #e8f5e8; padding: 10px;">${JSON.stringify(data.products[0], null, 2)}</pre>
                            </div>
                        `;
                    }
                    
                } catch (error) {
                    resultsDiv.innerHTML += `
                        <div style="margin: 10px 0; padding: 10px; border: 1px solid red; background: #ffe6e6;">
                            <strong>Error loading ${category}:</strong> ${error.message}
                        </div>
                    `;
                }
            }
        }
        
        // Run test when page loads
        window.addEventListener('load', testProductLoading);
    </script>
</div>
